# locations-search
This software Search in a circle area of location points and execute some operations using spark. That location points are in a csv file.

## Requirements
To execute the software is neccesary sbt version 0.13.13 or major. All dependencies will be downloaded in the first compilation of the project.
If you want to execute directly into a spark cluster, you will need spark 2.2 version. 


## How to run
In the parent directory of the project:
```sh
  > sbt
  
  > sbt compile
  
  > sbt run
  ```
  
## Operations
Once the software is running, first it requieres you to put coordinate x, y and a radius. With that coordinates it will search in a distributed way using spark, the points that exists inside the circle area generated by the radius.
```sh
Please insert x coordinate
> 123456
Please insert y coordinate
> 234432
Please insert radius:
> 12345
  ```

Then we can choose wich operation we want execute:
```sh
 Which operation do you want to execute:
     ICR -> Increase an attribute, ADD --> Add all attributes, AVG -> Average of attributes,
     MED --> median of all attributes, POINT --> to reinsert the point and radius of reference
     (EXIT to finish)
> 
```

- ICR: This operation increase an attribute of point, an amount specified. The sostware return all the points in the area, with the attributted increased.
- AVG: This operation add a final attribute to the point with the average of all attributes
- ADD: This operation add a final attribute to the point with the addition of all attributes
- MED: This operation add a final attribute to the point with the madian of all attributes

It is possible to execute more than one operation with the same area calculated, but if you want to change that area just type POINT, and it will start again asking you for the coordinates.
You can finish typing EXIT

Example:
```sh
Please insert x coordinate
> 123456
Please insert y coordinate
> 234432
Please insert radius:
> 12345

     Which operation do you want to execute:
     ICR -> Increase an attribute, ADD --> Add all attributes, AVG -> Average of attributes,
     MED --> median of all attributes, POINT --> to reinsert the point and radius of reference
     (EXIT to finish)
> point
Please insert x coordinate
> 123456
Please insert y coordinate
> 234432
Please insert radius:
> 1234

     Which operation do you want to execute:
     ICR -> Increase an attribute, ADD --> Add all attributes, AVG -> Average of attributes,
     MED --> median of all attributes, POINT --> to reinsert the point and radius of reference
     (EXIT to finish)
> ICR
Insert the attribute number to increase (1-15)
> 3
Insert the amount
> 1000
107389,170889,6,21,1033,96,6,22,55,30,8,34,2,50,2,96,11
43375,153978,21,2,1059,17,57,74,28,7,98,2,72,80,55,57,30

     Which operation do you want to execute:
     ICR -> Increase an attribute, ADD --> Add all attributes, AVG -> Average of attributes,
     MED --> median of all attributes, POINT --> to reinsert the point and radius of reference
     (EXIT to finish)
> 

```

## More info
This software is ready to run into a spark cluster. It is developed with spark 2.2 version, and you can generate a jar that will be executed with a spark-submit.
To get the jar just type in the parent directory of the project
```sh
> sbt assembly
```

and the jar file will be placed into target/scala_2.11/ directory.

  
  


